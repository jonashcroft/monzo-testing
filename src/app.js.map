{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/_config.js","src/js/_get-transactions.js","src/js/_init.js","src/js/app.js","src/js/auth/_auth.js","src/js/auth/_connected.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","const config = {\n    'clientId'     : 'oauth2client_00009YXx3nKAlmOlNhnrLF',\n    'clientSecret' : 'mnzconf.qysHN88KPApAuUMznZL8N3ib2tPGjR6YowRXghmEJC+Tj8aoihzNsz1LJYdxep46MrzvOGq9TsU9SRJWf/uM',\n\n    'redirectUrl'  : 'http://localhost:3000',\n    'monzoUrl'     : 'https://api.monzo.com',\n\n    'connectedDiv' :  document.getElementById('connected'),\n    'authDiv'      :  document.getElementById('authDiv')\n};\n\nexport default config;","import config from './_config.js';\n\nconst getTransactions = () => {\n\n    let transactionIDs = [];\n\n    const transEndpoint = `${config.monzoUrl}/transactions?account_id=${sessionStorage.getItem('accountId')}&limit=25`;\n\n    fetch( transEndpoint, {\n        'method': 'GET',\n        headers: {\n            Authorization: `Bearer ${sessionStorage.getItem('accessToken')}`\n        }\n    })\n    .then( (data) => data.json() )\n    .then( (transResponse) => {\n\n        [...transResponse.transactions].forEach(element => {\n\n            transactionIDs.push( element['id'] );\n\n        });\n\n        getTransactionDetails( transactionIDs );\n\n\n    }).catch( function( error ) {\n\n        console.error(`Failed: ${error}`);\n\n    });\n\n};\n\n\nconst getTransactionDetails = (transactionIDs) => {\n\n    let combinedTransactions = [];\n    let combineTrans = {};\n\n    transactionIDs.forEach(function(ourTransaction) {\n\n        // console.log(ourTransaction);\n\n        let transactionDetail = `${config.monzoUrl}/transactions/${ourTransaction}?expand[]=merchant`;\n\n        fetch( transactionDetail, {\n            'method': 'GET',\n            headers: {\n                Authorization: `Bearer ${sessionStorage.getItem('accessToken')}`\n            }\n        })\n        .then( (data) => data.json() )\n        .then( (transactionResponse) => {\n\n            if (\n                transactionResponse.transaction.merchant &&\n                transactionResponse.transaction.merchant.online == false ) {\n\n                    let merchantInfo = transactionResponse.transaction.merchant;\n\n\n                    let transactionInfo = [\n                        'category', merchantInfo.category,\n                        'created', merchantInfo.created,\n                        'name', merchantInfo.name,\n                        'logo', merchantInfo.logo\n                    ];\n\n                    combinedTransactions.push(transactionInfo);\n\n\n                // console.dir( merchantInfo.address );\n\n                // console.log( merchantInfo.category );                // console.dir( transactionResponse.transaction );\n                // console.log( merchantInfo.created );\n                // console.log( merchantInfo.name );\n                // console.log( merchantInfo.logo );\n\n                // console.log\n\n                // combinedTransactions.push( transactionResponse.transaction.merchant );\n\n                // Object.assign( combineTrans, transactionResponse.transaction.merchant );\n\n                sessionStorage.setItem('transactionDetails', 'set');\n\n            }\n\n        }).catch( function( error ) {\n\n            console.error(`Failed: ${error}`);\n\n\n        });\n\n\n    });\n\n    // console.dir(combinedTransactions);\n\n    // console.log( combineTrans );\n\n    initMap(combinedTransactions);\n\n};\n\n\nwindow.initMap = ( combinedTransactions ) => {\n\n    let accessToken = sessionStorage.getItem('transactionDetails');\n    //     locations = [];\n\n    if ( typeof accessToken !== 'undefined' && accessToken !== null ) {\n\n        // console.dir(combineTrans);\n        console.dir(combinedTransactions);\n\n    }\n    else {\n        console.log('nah fam');\n    }\n\n\n    var locations = [\n        ['Bondi Beach', -33.890542, 151.274856, 4],\n        ['Coogee Beach', -33.923036, 151.259052, 5],\n        ['Cronulla Beach', -34.028249, 151.157507, 3],\n        ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],\n        ['Maroubra Beach', -33.950198, 151.259302, 1]\n      ];\n\n      var map = new google.maps.Map(document.getElementById('map'), {\n        zoom: 10,\n        center: new google.maps.LatLng(-33.92, 151.25),\n        mapTypeId: google.maps.MapTypeId.ROADMAP\n      });\n\n      var infowindow = new google.maps.InfoWindow();\n\n      var marker, i;\n\n      for (i = 0; i < locations.length; i++) {\n        marker = new google.maps.Marker({\n          position: new google.maps.LatLng(locations[i][1], locations[i][2]),\n          map: map\n        });\n\n        google.maps.event.addListener(marker, 'click', (function(marker, i) {\n          return function() {\n            infowindow.setContent(locations[i][0]);\n            infowindow.open(map, marker);\n          }\n        })(marker, i));\n      }\n\n};\n\n\nexport default getTransactions;","import config from './_config.js';\nimport { initConnect, getAuthCode } from './auth/_auth.js';\nimport connected from './auth/_connected.js';\n// import GoogleMapsApi from ''\n\nconst app = () => {\n\n    let accessToken = sessionStorage.getItem('accessToken');\n\n    if ( typeof accessToken !== 'undefined' && accessToken !== null ) {\n\n        connected();\n\n    }\n    else {\n\n        if ( getAuthCode('code') ) {\n\n            // If an auth code exists in the URL, not entirely sure this needs to be here\n            console.log('if getauthcode - code');\n\n        } else {\n\n            console.log('we need to connect');\n\n            initConnect();\n\n        }\n\n    }\n\n};\n\nexport default app;","import app from './_init.js';\n\napp();","import config from '../_config.js';\nimport connected from './_connected.js';\n\nconst initConnect = () => {\n\n    let authorise = document.getElementById('authBtn');\n\n    config.authDiv.classList.remove('inactive');\n    config.authDiv.classList.add('active');\n    config.connectedDiv.classList.remove('active');\n    config.connectedDiv.classList.add('inactive');\n\n    authorise.addEventListener('click', () => {\n\n        initAuth();\n\n    }, false);\n\n};\n\nconst initAuth = () => {\n\n    let authUrl = `https://auth.monzo.com/?client_id=${ config.clientId }&redirect_uri=${ config.redirectUrl }&response_type=code&state=${ Math.random().toString(23).substring(4) }`;\n\n    window.location.replace(authUrl);\n\n};\n\nconst getAuthCode = code => {\n\n    let accessCode = new URLSearchParams(document.location.search).get('code');\n\n    if ( accessCode ) {\n        getAccessToken( accessCode );\n    }\n\n\treturn accessCode;\n\n};\n\nconst getAccessToken = accessCode => {\n\n    console.log('get access token function');\n\n    const url = `${config.monzoUrl}/oauth2/token`;\n\n    const formData = new FormData();\n    formData.append('client_id', config.clientId);\n    formData.append('client_secret', config.clientSecret);\n    formData.append('code', accessCode);\n    formData.append('grant_type', 'authorization_code');\n    formData.append('redirect_uri', config.redirectUrl);\n\n    fetch ( url, {\n        method: 'POST',\n        body: formData\n    })\n    // .then( data => data.text() )\n    .then( (data) => data.json() )\n    .then( (authResponse) => {\n        console.log( authResponse );\n\n        sessionStorage.setItem('accessToken', authResponse.access_token);\n        sessionStorage.setItem('refreshToken', authResponse.refresh_token);\n\n        window.history.replaceState(null, null, window.location.pathname);\n\n        connected();\n\n    }).catch( function ( error ) {\n        console.log( 'failed: ', error );\n    });\n\n};\n\nexport { initConnect, initAuth, getAuthCode };\n","import config from '../_config.js';\nimport getTransactions from '../_get-transactions.js';\n\nconst connected = () => {\n\n    config.authDiv.classList.remove('active');\n    config.authDiv.classList.add('inactive');\n    config.connectedDiv.classList.remove('inactive');\n    config.connectedDiv.classList.add('active');\n\n    // console.log(`Our access token is: ${ sessionStorage.getItem('accessToken') }`);\n\n    // Uncomment when you need to verify connection with the API\n    pingMonzo();\n\n    if ( getMonzoAccount('monzoAccountID') ) {\n\n        getTransactions();\n\n    }\n    else {\n\n        console.log('no account id - do something here');\n\n    }\n\n};\n\n/*-------------\nQuick helper function to confirm with Monzo's server that we\n(the current user) are authenticated with the API\n--------------*/\nconst pingMonzo = () => {\n\n    const pingEndpoint = `${config.monzoUrl}/ping/whoami`;\n\n    fetch( pingEndpoint, {\n        method: 'GET',\n        headers: {\n            Authorization: `Bearer ${sessionStorage.getItem('accessToken')}`\n        }\n    })\n    .then( (data) => data.json() )\n    .then( (pingResponse) => {\n\n        console.table(pingResponse);\n\n    }).catch( function( error ) {\n\n        console.error(`Failed: ${error}`);\n\n    });\n\n};\n\n/*-------------\nGet the account ID of our preferred Monzo account,\nthis will only get (1) account and excludes prepaid\naccounts. If Monzo let users have multiple accounts\nin the future, this will need to change.\n\nIn fact - I haven't looked into Joint accounts so\nthis might not even work for those.\n--------------*/\nconst getMonzoAccount = ( monzoAccountID ) => {\n\n    const pingEndpoint = `${config.monzoUrl}/accounts?account_type=uk_retail`;\n\n    fetch( pingEndpoint, {\n        method: 'GET',\n        headers: {\n            Authorization: `Bearer ${sessionStorage.getItem('accessToken')}`\n        },\n    })\n    .then( (data) => data.json() )\n    .then( (accountsResp) => {\n\n        // console.table( accountsResp.accounts );\n        monzoAccountID = accountsResp.accounts[0].id;\n        sessionStorage.setItem('accountId', monzoAccountID );\n\n    }).catch( function( error ) {\n\n        console.error(`Failed: ${error}`);\n\n    });\n\n    return monzoAccountID;\n\n};\n\nexport default connected;"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvX2NvbmZpZy5qcyIsInNyYy9qcy9fZ2V0LXRyYW5zYWN0aW9ucy5qcyIsInNyYy9qcy9faW5pdC5qcyIsInNyYy9qcy9hcHAuanMiLCJzcmMvanMvYXV0aC9fYXV0aC5qcyIsInNyYy9qcy9hdXRoL19jb25uZWN0ZWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQ0FBLElBQU0sU0FBUztBQUNYLGdCQUFpQixxQ0FETjtBQUVYLG9CQUFpQiw4RkFGTjs7QUFJWCxtQkFBaUIsdUJBSk47QUFLWCxnQkFBaUIsdUJBTE47O0FBT1gsb0JBQWtCLFNBQVMsY0FBVCxDQUF3QixXQUF4QixDQVBQO0FBUVgsZUFBa0IsU0FBUyxjQUFULENBQXdCLFNBQXhCO0FBUlAsQ0FBZjs7a0JBV2UsTTs7Ozs7Ozs7O0FDWGY7Ozs7Ozs7O0FBRUEsSUFBTSxrQkFBa0IsU0FBbEIsZUFBa0IsR0FBTTs7QUFFMUIsUUFBSSxpQkFBaUIsRUFBckI7O0FBRUEsUUFBTSxnQkFBbUIsaUJBQU8sUUFBMUIsaUNBQThELGVBQWUsT0FBZixDQUF1QixXQUF2QixDQUE5RCxjQUFOOztBQUVBLFVBQU8sYUFBUCxFQUFzQjtBQUNsQixrQkFBVSxLQURRO0FBRWxCLGlCQUFTO0FBQ0wsdUNBQXlCLGVBQWUsT0FBZixDQUF1QixhQUF2QjtBQURwQjtBQUZTLEtBQXRCLEVBTUMsSUFORCxDQU1PLFVBQUMsSUFBRDtBQUFBLGVBQVUsS0FBSyxJQUFMLEVBQVY7QUFBQSxLQU5QLEVBT0MsSUFQRCxDQU9PLFVBQUMsYUFBRCxFQUFtQjs7QUFFdEIscUNBQUksY0FBYyxZQUFsQixHQUFnQyxPQUFoQyxDQUF3QyxtQkFBVzs7QUFFL0MsMkJBQWUsSUFBZixDQUFxQixRQUFRLElBQVIsQ0FBckI7QUFFSCxTQUpEOztBQU1BLDhCQUF1QixjQUF2QjtBQUdILEtBbEJELEVBa0JHLEtBbEJILENBa0JV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QU9PLFVBQUMsWUFBRCxFQUFrQjs7QUFFckI7QUFDQSx5QkFBaUIsYUFBYSxRQUFiLENBQXNCLENBQXRCLEVBQXlCLEVBQTFDO0FBQ0EsdUJBQWUsT0FBZixDQUF1QixXQUF2QixFQUFvQyxjQUFwQztBQUVILEtBYkQsRUFhRyxLQWJILENBYVUsVUFBVSxLQUFWLEVBQWtCOztBQUV4QixnQkFBUSxLQUFSLGNBQXlCLEtBQXpCO0FBRUgsS0FqQkQ7O0FBbUJBLFdBQU8sY0FBUDtBQUVILENBekJEOztrQkEyQmUsUyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImNvbnN0IGNvbmZpZyA9IHtcbiAgICAnY2xpZW50SWQnICAgICA6ICdvYXV0aDJjbGllbnRfMDAwMDlZWHgzbktBbG1PbE5obnJMRicsXG4gICAgJ2NsaWVudFNlY3JldCcgOiAnbW56Y29uZi5xeXNITjg4S1BBcEF1VU16blpMOE4zaWIydFBHalI2WW93UlhnaG1FSkMrVGo4YW9paHpOc3oxTEpZZHhlcDQ2TXJ6dk9HcTlUc1U5U1JKV2YvdU0nLFxuXG4gICAgJ3JlZGlyZWN0VXJsJyAgOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyxcbiAgICAnbW9uem9VcmwnICAgICA6ICdodHRwczovL2FwaS5tb256by5jb20nLFxuXG4gICAgJ2Nvbm5lY3RlZERpdicgOiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nvbm5lY3RlZCcpLFxuICAgICdhdXRoRGl2JyAgICAgIDogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRoRGl2Jylcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbmZpZzsiLCJpbXBvcnQgY29uZmlnIGZyb20gJy4vX2NvbmZpZy5qcyc7XG5cbmNvbnN0IGdldFRyYW5zYWN0aW9ucyA9ICgpID0+IHtcblxuICAgIGxldCB0cmFuc2FjdGlvbklEcyA9IFtdO1xuXG4gICAgY29uc3QgdHJhbnNFbmRwb2ludCA9IGAke2NvbmZpZy5tb256b1VybH0vdHJhbnNhY3Rpb25zP2FjY291bnRfaWQ9JHtzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY2NvdW50SWQnKX0mbGltaXQ9MjVgO1xuXG4gICAgZmV0Y2goIHRyYW5zRW5kcG9pbnQsIHtcbiAgICAgICAgJ21ldGhvZCc6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKX1gXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC50aGVuKCAoZGF0YSkgPT4gZGF0YS5qc29uKCkgKVxuICAgIC50aGVuKCAodHJhbnNSZXNwb25zZSkgPT4ge1xuXG4gICAgICAgIFsuLi50cmFuc1Jlc3BvbnNlLnRyYW5zYWN0aW9uc10uZm9yRWFjaChlbGVtZW50ID0+IHtcblxuICAgICAgICAgICAgdHJhbnNhY3Rpb25JRHMucHVzaCggZWxlbWVudFsnaWQnXSApO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGdldFRyYW5zYWN0aW9uRGV0YWlscyggdHJhbnNhY3Rpb25JRHMgKTtcblxuXG4gICAgfSkuY2F0Y2goIGZ1bmN0aW9uKCBlcnJvciApIHtcblxuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQ6ICR7ZXJyb3J9YCk7XG5cbiAgICB9KTtcblxufTtcblxuXG5jb25zdCBnZXRUcmFuc2FjdGlvbkRldGFpbHMgPSAodHJhbnNhY3Rpb25JRHMpID0+IHtcblxuICAgIGxldCBjb21iaW5lZFRyYW5zYWN0aW9ucyA9IFtdO1xuICAgIGxldCBjb21iaW5lVHJhbnMgPSB7fTtcblxuICAgIHRyYW5zYWN0aW9uSURzLmZvckVhY2goZnVuY3Rpb24ob3VyVHJhbnNhY3Rpb24pIHtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZyhvdXJUcmFuc2FjdGlvbik7XG5cbiAgICAgICAgbGV0IHRyYW5zYWN0aW9uRGV0YWlsID0gYCR7Y29uZmlnLm1vbnpvVXJsfS90cmFuc2FjdGlvbnMvJHtvdXJUcmFuc2FjdGlvbn0/ZXhwYW5kW109bWVyY2hhbnRgO1xuXG4gICAgICAgIGZldGNoKCB0cmFuc2FjdGlvbkRldGFpbCwge1xuICAgICAgICAgICAgJ21ldGhvZCc6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NUb2tlbicpfWBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oIChkYXRhKSA9PiBkYXRhLmpzb24oKSApXG4gICAgICAgIC50aGVuKCAodHJhbnNhY3Rpb25SZXNwb25zZSkgPT4ge1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25SZXNwb25zZS50cmFuc2FjdGlvbi5tZXJjaGFudCAmJlxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uUmVzcG9uc2UudHJhbnNhY3Rpb24ubWVyY2hhbnQub25saW5lID09IGZhbHNlICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXJjaGFudEluZm8gPSB0cmFuc2FjdGlvblJlc3BvbnNlLnRyYW5zYWN0aW9uLm1lcmNoYW50O1xuXG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IHRyYW5zYWN0aW9uSW5mbyA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdjYXRlZ29yeScsIG1lcmNoYW50SW5mby5jYXRlZ29yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdjcmVhdGVkJywgbWVyY2hhbnRJbmZvLmNyZWF0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmFtZScsIG1lcmNoYW50SW5mby5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2xvZ28nLCBtZXJjaGFudEluZm8ubG9nb1xuICAgICAgICAgICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkVHJhbnNhY3Rpb25zLnB1c2godHJhbnNhY3Rpb25JbmZvKTtcblxuXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5kaXIoIG1lcmNoYW50SW5mby5hZGRyZXNzICk7XG5cbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyggbWVyY2hhbnRJbmZvLmNhdGVnb3J5ICk7ICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZGlyKCB0cmFuc2FjdGlvblJlc3BvbnNlLnRyYW5zYWN0aW9uICk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIG1lcmNoYW50SW5mby5jcmVhdGVkICk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIG1lcmNoYW50SW5mby5uYW1lICk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIG1lcmNoYW50SW5mby5sb2dvICk7XG5cbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZ1xuXG4gICAgICAgICAgICAgICAgLy8gY29tYmluZWRUcmFuc2FjdGlvbnMucHVzaCggdHJhbnNhY3Rpb25SZXNwb25zZS50cmFuc2FjdGlvbi5tZXJjaGFudCApO1xuXG4gICAgICAgICAgICAgICAgLy8gT2JqZWN0LmFzc2lnbiggY29tYmluZVRyYW5zLCB0cmFuc2FjdGlvblJlc3BvbnNlLnRyYW5zYWN0aW9uLm1lcmNoYW50ICk7XG5cbiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd0cmFuc2FjdGlvbkRldGFpbHMnLCAnc2V0Jyk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KS5jYXRjaCggZnVuY3Rpb24oIGVycm9yICkge1xuXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQ6ICR7ZXJyb3J9YCk7XG5cblxuICAgICAgICB9KTtcblxuXG4gICAgfSk7XG5cbiAgICAvLyBjb25zb2xlLmRpcihjb21iaW5lZFRyYW5zYWN0aW9ucyk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyggY29tYmluZVRyYW5zICk7XG5cbiAgICBpbml0TWFwKGNvbWJpbmVkVHJhbnNhY3Rpb25zKTtcblxufTtcblxuXG53aW5kb3cuaW5pdE1hcCA9ICggY29tYmluZWRUcmFuc2FjdGlvbnMgKSA9PiB7XG5cbiAgICBsZXQgYWNjZXNzVG9rZW4gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd0cmFuc2FjdGlvbkRldGFpbHMnKTtcbiAgICAvLyAgICAgbG9jYXRpb25zID0gW107XG5cbiAgICBpZiAoIHR5cGVvZiBhY2Nlc3NUb2tlbiAhPT0gJ3VuZGVmaW5lZCcgJiYgYWNjZXNzVG9rZW4gIT09IG51bGwgKSB7XG5cbiAgICAgICAgLy8gY29uc29sZS5kaXIoY29tYmluZVRyYW5zKTtcbiAgICAgICAgY29uc29sZS5kaXIoY29tYmluZWRUcmFuc2FjdGlvbnMpO1xuXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnbmFoIGZhbScpO1xuICAgIH1cblxuXG4gICAgdmFyIGxvY2F0aW9ucyA9IFtcbiAgICAgICAgWydCb25kaSBCZWFjaCcsIC0zMy44OTA1NDIsIDE1MS4yNzQ4NTYsIDRdLFxuICAgICAgICBbJ0Nvb2dlZSBCZWFjaCcsIC0zMy45MjMwMzYsIDE1MS4yNTkwNTIsIDVdLFxuICAgICAgICBbJ0Nyb251bGxhIEJlYWNoJywgLTM0LjAyODI0OSwgMTUxLjE1NzUwNywgM10sXG4gICAgICAgIFsnTWFubHkgQmVhY2gnLCAtMzMuODAwMTAxMjg2NTcwNzEsIDE1MS4yODc0NzgyMDg1NDE4NywgMl0sXG4gICAgICAgIFsnTWFyb3VicmEgQmVhY2gnLCAtMzMuOTUwMTk4LCAxNTEuMjU5MzAyLCAxXVxuICAgICAgXTtcblxuICAgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgICAgIHpvb206IDEwLFxuICAgICAgICBjZW50ZXI6IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoLTMzLjkyLCAxNTEuMjUpLFxuICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQXG4gICAgICB9KTtcblxuICAgICAgdmFyIGluZm93aW5kb3cgPSBuZXcgZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdygpO1xuXG4gICAgICB2YXIgbWFya2VyLCBpO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uc1tpXVsxXSwgbG9jYXRpb25zW2ldWzJdKSxcbiAgICAgICAgICBtYXA6IG1hcFxuICAgICAgICB9KTtcblxuICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdjbGljaycsIChmdW5jdGlvbihtYXJrZXIsIGkpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbmZvd2luZG93LnNldENvbnRlbnQobG9jYXRpb25zW2ldWzBdKTtcbiAgICAgICAgICAgIGluZm93aW5kb3cub3BlbihtYXAsIG1hcmtlcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KShtYXJrZXIsIGkpKTtcbiAgICAgIH1cblxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBnZXRUcmFuc2FjdGlvbnM7IiwiaW1wb3J0IGNvbmZpZyBmcm9tICcuL19jb25maWcuanMnO1xuaW1wb3J0IHsgaW5pdENvbm5lY3QsIGdldEF1dGhDb2RlIH0gZnJvbSAnLi9hdXRoL19hdXRoLmpzJztcbmltcG9ydCBjb25uZWN0ZWQgZnJvbSAnLi9hdXRoL19jb25uZWN0ZWQuanMnO1xuLy8gaW1wb3J0IEdvb2dsZU1hcHNBcGkgZnJvbSAnJ1xuXG5jb25zdCBhcHAgPSAoKSA9PiB7XG5cbiAgICBsZXQgYWNjZXNzVG9rZW4gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NUb2tlbicpO1xuXG4gICAgaWYgKCB0eXBlb2YgYWNjZXNzVG9rZW4gIT09ICd1bmRlZmluZWQnICYmIGFjY2Vzc1Rva2VuICE9PSBudWxsICkge1xuXG4gICAgICAgIGNvbm5lY3RlZCgpO1xuXG4gICAgfVxuICAgIGVsc2Uge1xuXG4gICAgICAgIGlmICggZ2V0QXV0aENvZGUoJ2NvZGUnKSApIHtcblxuICAgICAgICAgICAgLy8gSWYgYW4gYXV0aCBjb2RlIGV4aXN0cyBpbiB0aGUgVVJMLCBub3QgZW50aXJlbHkgc3VyZSB0aGlzIG5lZWRzIHRvIGJlIGhlcmVcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpZiBnZXRhdXRoY29kZSAtIGNvZGUnKTtcblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnd2UgbmVlZCB0byBjb25uZWN0Jyk7XG5cbiAgICAgICAgICAgIGluaXRDb25uZWN0KCk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG59O1xuXG5leHBvcnQgZGVmYXVsdCBhcHA7IiwiaW1wb3J0IGFwcCBmcm9tICcuL19pbml0LmpzJztcblxuYXBwKCk7IiwiaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9fY29uZmlnLmpzJztcbmltcG9ydCBjb25uZWN0ZWQgZnJvbSAnLi9fY29ubmVjdGVkLmpzJztcblxuY29uc3QgaW5pdENvbm5lY3QgPSAoKSA9PiB7XG5cbiAgICBsZXQgYXV0aG9yaXNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dGhCdG4nKTtcblxuICAgIGNvbmZpZy5hdXRoRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJyk7XG4gICAgY29uZmlnLmF1dGhEaXYuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgY29uZmlnLmNvbm5lY3RlZERpdi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICBjb25maWcuY29ubmVjdGVkRGl2LmNsYXNzTGlzdC5hZGQoJ2luYWN0aXZlJyk7XG5cbiAgICBhdXRob3Jpc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cbiAgICAgICAgaW5pdEF1dGgoKTtcblxuICAgIH0sIGZhbHNlKTtcblxufTtcblxuY29uc3QgaW5pdEF1dGggPSAoKSA9PiB7XG5cbiAgICBsZXQgYXV0aFVybCA9IGBodHRwczovL2F1dGgubW9uem8uY29tLz9jbGllbnRfaWQ9JHsgY29uZmlnLmNsaWVudElkIH0mcmVkaXJlY3RfdXJpPSR7IGNvbmZpZy5yZWRpcmVjdFVybCB9JnJlc3BvbnNlX3R5cGU9Y29kZSZzdGF0ZT0keyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDIzKS5zdWJzdHJpbmcoNCkgfWA7XG5cbiAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShhdXRoVXJsKTtcblxufTtcblxuY29uc3QgZ2V0QXV0aENvZGUgPSBjb2RlID0+IHtcblxuICAgIGxldCBhY2Nlc3NDb2RlID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpLmdldCgnY29kZScpO1xuXG4gICAgaWYgKCBhY2Nlc3NDb2RlICkge1xuICAgICAgICBnZXRBY2Nlc3NUb2tlbiggYWNjZXNzQ29kZSApO1xuICAgIH1cblxuXHRyZXR1cm4gYWNjZXNzQ29kZTtcblxufTtcblxuY29uc3QgZ2V0QWNjZXNzVG9rZW4gPSBhY2Nlc3NDb2RlID0+IHtcblxuICAgIGNvbnNvbGUubG9nKCdnZXQgYWNjZXNzIHRva2VuIGZ1bmN0aW9uJyk7XG5cbiAgICBjb25zdCB1cmwgPSBgJHtjb25maWcubW9uem9Vcmx9L29hdXRoMi90b2tlbmA7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGZvcm1EYXRhLmFwcGVuZCgnY2xpZW50X2lkJywgY29uZmlnLmNsaWVudElkKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBjb25maWcuY2xpZW50U2VjcmV0KTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ2NvZGUnLCBhY2Nlc3NDb2RlKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ2dyYW50X3R5cGUnLCAnYXV0aG9yaXphdGlvbl9jb2RlJyk7XG4gICAgZm9ybURhdGEuYXBwZW5kKCdyZWRpcmVjdF91cmknLCBjb25maWcucmVkaXJlY3RVcmwpO1xuXG4gICAgZmV0Y2ggKCB1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IGZvcm1EYXRhXG4gICAgfSlcbiAgICAvLyAudGhlbiggZGF0YSA9PiBkYXRhLnRleHQoKSApXG4gICAgLnRoZW4oIChkYXRhKSA9PiBkYXRhLmpzb24oKSApXG4gICAgLnRoZW4oIChhdXRoUmVzcG9uc2UpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coIGF1dGhSZXNwb25zZSApO1xuXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2FjY2Vzc1Rva2VuJywgYXV0aFJlc3BvbnNlLmFjY2Vzc190b2tlbik7XG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3JlZnJlc2hUb2tlbicsIGF1dGhSZXNwb25zZS5yZWZyZXNoX3Rva2VuKTtcblxuICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgbnVsbCwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTtcblxuICAgICAgICBjb25uZWN0ZWQoKTtcblxuICAgIH0pLmNhdGNoKCBmdW5jdGlvbiAoIGVycm9yICkge1xuICAgICAgICBjb25zb2xlLmxvZyggJ2ZhaWxlZDogJywgZXJyb3IgKTtcbiAgICB9KTtcblxufTtcblxuZXhwb3J0IHsgaW5pdENvbm5lY3QsIGluaXRBdXRoLCBnZXRBdXRoQ29kZSB9O1xuIiwiaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9fY29uZmlnLmpzJztcbmltcG9ydCBnZXRUcmFuc2FjdGlvbnMgZnJvbSAnLi4vX2dldC10cmFuc2FjdGlvbnMuanMnO1xuXG5jb25zdCBjb25uZWN0ZWQgPSAoKSA9PiB7XG5cbiAgICBjb25maWcuYXV0aERpdi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICBjb25maWcuYXV0aERpdi5jbGFzc0xpc3QuYWRkKCdpbmFjdGl2ZScpO1xuICAgIGNvbmZpZy5jb25uZWN0ZWREaXYuY2xhc3NMaXN0LnJlbW92ZSgnaW5hY3RpdmUnKTtcbiAgICBjb25maWcuY29ubmVjdGVkRGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXG4gICAgLy8gY29uc29sZS5sb2coYE91ciBhY2Nlc3MgdG9rZW4gaXM6ICR7IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJykgfWApO1xuXG4gICAgLy8gVW5jb21tZW50IHdoZW4geW91IG5lZWQgdG8gdmVyaWZ5IGNvbm5lY3Rpb24gd2l0aCB0aGUgQVBJXG4gICAgcGluZ01vbnpvKCk7XG5cbiAgICBpZiAoIGdldE1vbnpvQWNjb3VudCgnbW9uem9BY2NvdW50SUQnKSApIHtcblxuICAgICAgICBnZXRUcmFuc2FjdGlvbnMoKTtcblxuICAgIH1cbiAgICBlbHNlIHtcblxuICAgICAgICBjb25zb2xlLmxvZygnbm8gYWNjb3VudCBpZCAtIGRvIHNvbWV0aGluZyBoZXJlJyk7XG5cbiAgICB9XG5cbn07XG5cbi8qLS0tLS0tLS0tLS0tLVxuUXVpY2sgaGVscGVyIGZ1bmN0aW9uIHRvIGNvbmZpcm0gd2l0aCBNb256bydzIHNlcnZlciB0aGF0IHdlXG4odGhlIGN1cnJlbnQgdXNlcikgYXJlIGF1dGhlbnRpY2F0ZWQgd2l0aCB0aGUgQVBJXG4tLS0tLS0tLS0tLS0tLSovXG5jb25zdCBwaW5nTW9uem8gPSAoKSA9PiB7XG5cbiAgICBjb25zdCBwaW5nRW5kcG9pbnQgPSBgJHtjb25maWcubW9uem9Vcmx9L3Bpbmcvd2hvYW1pYDtcblxuICAgIGZldGNoKCBwaW5nRW5kcG9pbnQsIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyl9YFxuICAgICAgICB9XG4gICAgfSlcbiAgICAudGhlbiggKGRhdGEpID0+IGRhdGEuanNvbigpIClcbiAgICAudGhlbiggKHBpbmdSZXNwb25zZSkgPT4ge1xuXG4gICAgICAgIGNvbnNvbGUudGFibGUocGluZ1Jlc3BvbnNlKTtcblxuICAgIH0pLmNhdGNoKCBmdW5jdGlvbiggZXJyb3IgKSB7XG5cbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkOiAke2Vycm9yfWApO1xuXG4gICAgfSk7XG5cbn07XG5cbi8qLS0tLS0tLS0tLS0tLVxuR2V0IHRoZSBhY2NvdW50IElEIG9mIG91ciBwcmVmZXJyZWQgTW9uem8gYWNjb3VudCxcbnRoaXMgd2lsbCBvbmx5IGdldCAoMSkgYWNjb3VudCBhbmQgZXhjbHVkZXMgcHJlcGFpZFxuYWNjb3VudHMuIElmIE1vbnpvIGxldCB1c2VycyBoYXZlIG11bHRpcGxlIGFjY291bnRzXG5pbiB0aGUgZnV0dXJlLCB0aGlzIHdpbGwgbmVlZCB0byBjaGFuZ2UuXG5cbkluIGZhY3QgLSBJIGhhdmVuJ3QgbG9va2VkIGludG8gSm9pbnQgYWNjb3VudHMgc29cbnRoaXMgbWlnaHQgbm90IGV2ZW4gd29yayBmb3IgdGhvc2UuXG4tLS0tLS0tLS0tLS0tLSovXG5jb25zdCBnZXRNb256b0FjY291bnQgPSAoIG1vbnpvQWNjb3VudElEICkgPT4ge1xuXG4gICAgY29uc3QgcGluZ0VuZHBvaW50ID0gYCR7Y29uZmlnLm1vbnpvVXJsfS9hY2NvdW50cz9hY2NvdW50X3R5cGU9dWtfcmV0YWlsYDtcblxuICAgIGZldGNoKCBwaW5nRW5kcG9pbnQsIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyl9YFxuICAgICAgICB9LFxuICAgIH0pXG4gICAgLnRoZW4oIChkYXRhKSA9PiBkYXRhLmpzb24oKSApXG4gICAgLnRoZW4oIChhY2NvdW50c1Jlc3ApID0+IHtcblxuICAgICAgICAvLyBjb25zb2xlLnRhYmxlKCBhY2NvdW50c1Jlc3AuYWNjb3VudHMgKTtcbiAgICAgICAgbW9uem9BY2NvdW50SUQgPSBhY2NvdW50c1Jlc3AuYWNjb3VudHNbMF0uaWQ7XG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2FjY291bnRJZCcsIG1vbnpvQWNjb3VudElEICk7XG5cbiAgICB9KS5jYXRjaCggZnVuY3Rpb24oIGVycm9yICkge1xuXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZDogJHtlcnJvcn1gKTtcblxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG1vbnpvQWNjb3VudElEO1xuXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0ZWQ7Il19"}