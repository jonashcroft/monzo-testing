{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/_auth.js","src/js/_config.js","src/js/_connected.js","src/js/_init.js","src/js/app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import config from './_config.js';\nimport connected from './_connected.js';\n\nconst initConnect = () => {\n\n    let authorise = document.getElementById('authBtn');\n\n    config.authDiv.classList.remove('inactive');\n    config.authDiv.classList.add('active');\n    config.connectedDiv.classList.remove('active');\n    config.connectedDiv.classList.add('inactive');\n\n    authorise.addEventListener('click', () => {\n\n        initAuth();\n\n    }, false);\n\n};\n\nconst initAuth = () => {\n\n    // sessionStorage.clear();\n\n    let authUrl = `https://auth.monzo.com/?client_id=${ config.clientId }&redirect_uri=${ config.redirectUrl }&response_type=code&state=${ Math.random().toString(23).substring(4) }`;\n\n    window.location.replace(authUrl);\n\n};\n\nconst getAuthCode = code => {\n\n    let accessCode = new URLSearchParams(document.location.search).get('code');\n\n    if ( accessCode ) {\n        getAccessToken( accessCode );\n    }\n\n\treturn accessCode;\n\n};\n\nconst getAccessToken = accessCode => {\n\n    const url = 'https://api.monzo.com/oauth2/token';\n\n    const formData = new FormData()\n    formData.append('client_id', config.clientId);\n    formData.append('client_secret', config.clientSecret);\n    formData.append('code', accessCode);\n    formData.append('grant_type', 'authorization_code');\n    formData.append('redirect_uri', config.redirectUrl);\n\n    fetch ( url, {\n        method: 'POST',\n        body: formData\n    })\n    // .then( data => data.text() )\n    .then( (data) => data.json() )\n    .then( (authResponse) => {\n        console.log( authResponse )\n\n        sessionStorage.setItem('accessToken', authResponse.access_token);\n        sessionStorage.setItem('refreshToken', authResponse.refresh_token);\n\n        window.history.replaceState(null, null, window.location.pathname);\n\n        connected();\n\n        //  let cleanUrl = new URLSearchParams(document.location.search).delete('code');\n\n        // accessCode.delete('code');\n\n        // console.log(` Access Token is set: ${ sessionStorage.getItem('accessToken') } `);\n\n        // console.log(`Our access token is: ${ sessionStorage.getItem('accessToken') }`);\n\n    }).catch( function ( error ) {\n        console.log( 'failed: ', error )\n    })\n\n}\n\nexport { initConnect, initAuth, getAuthCode }\n","const config = {\n    'clientId'     : '*** ID ***',\n    'clientSecret' : '*** SECRET ***',\n\n    'redirectUrl'  : 'http://localhost:3000',\n\n    'connectedDiv' :  document.getElementById('connected'),\n    'authDiv'      :  document.getElementById('authDiv')\n}\n\nexport default config;","import config from './_config.js';\n\nconst connected = () => {\n\n    config.authDiv.classList.remove('active');\n    config.authDiv.classList.add('inactive');\n    config.connectedDiv.classList.remove('inactive');\n    config.connectedDiv.classList.add('active');\n\n    console.log('well done');\n\n    console.log(`Access Token is set: ${ sessionStorage.getItem('accessToken') } `);\n    console.log(`Our access token is: ${ sessionStorage.getItem('accessToken') }`);\n\n}\n\nexport default connected;","import config from './_config.js';\nimport { initConnect, getAuthCode } from './_auth.js';\nimport connected from './_connected.js';\n\nconst app = () => {\n\n    sessionStorage.setItem('test', 'test');\n\n    console.log( `Session: ${ sessionStorage.getItem('test') } ` );\n\n    let sideBar = sessionStorage.getItem('accessToken');\n\n    if ( typeof sideBar !== 'undefined' && sideBar !== null ) {\n\n        // console.log(`access token is set to: ${ sessionStorage.getItem('accessToken') } `);\n\n        connected();\n\n    }\n    else {\n\n        if ( getAuthCode('code') ) {\n\n\n        } else {\n\n            console.log('we need to connect');\n\n            initConnect();\n\n        }\n\n    }\n\n    // if ( sessionStorage.getItem('accessToken') === 'null' ) {\n\n\n        // config.authDiv.classList.remove('active');\n        // config.authDiv.classList.add('inactive');\n        // config.connectedDiv.classList.remove('inactive');\n        // config.connectedDiv.classList.add('active');\n\n    // }\n    // if ( getAuthCode('code') ) {\n    // else ( getAuthCode('code') ) {\n        // console.log('we have auth code!');\n\n        // if ( sessionStorage.getItem('accessToken') === 'null' ) {\n\n        //     window.history.replaceState(null, null, window.location.pathname);\n\n        // }\n\n    // }\n\n    // if ( sessionStorage.getItem('accessToken') === 'null' ) {\n\n\n\n        // Do something here once we have auth and clean it up\n\n\n    // } else {\n\n        // console.log('we need to connect');\n\n        // initConnect();\n\n    // }\n\n};\n\nexport default app;","import app from './_init.js';\n\napp();"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvX2F1dGguanMiLCJzcmMvanMvX2NvbmZpZy5qcyIsInNyYy9qcy9fY29ubmVjdGVkLmpzIiwic3JjL2pzL19pbml0LmpzIiwic3JjL2pzL2FwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7QUNBQTs7OztBQUNBOzs7Ozs7QUFFQSxJQUFNLGNBQWMsU0FBZCxXQUFjLEdBQU07O0FBRXRCLFFBQUksWUFBWSxTQUFTLGNBQVQsQ0FBd0IsU0FBeEIsQ0FBaEI7O0FBRUEscUJBQU8sT0FBUCxDQUFlLFNBQWYsQ0FBeUIsTUFBekIsQ0FBZ0MsVUFBaEM7QUFDQSxxQkFBTyxPQUFQLENBQWUsU0FBZixDQUF5QixHQUF6QixDQUE2QixRQUE3QjtBQUNBLHFCQUFPLFlBQVAsQ0FBb0IsU0FBcEIsQ0FBOEIsTUFBOUIsQ0FBcUMsUUFBckM7QUFDQSxxQkFBTyxZQUFQLENBQW9CLFNBQXBCLENBQThCLEdBQTlCLENBQWtDLFVBQWxDOztBQUVBLGNBQVUsZ0JBQVYsQ0FBMkIsT0FBM0IsRUFBb0MsWUFBTTs7QUFFdEM7QUFFSCxLQUpELEVBSUcsS0FKSDtBQU1ILENBZkQ7O0FBaUJBLElBQU0sV0FBVyxTQUFYLFFBQVcsR0FBTTs7QUFFbkI7O0FBRUEsUUFBSSxpREFBZ0QsaUJBQU8sUUFBdkQsc0JBQWtGLGlCQUFPLFdBQXpGLGtDQUFtSSxLQUFLLE1BQUwsR0FBYyxRQUFkLENBQXVCLEVBQXZCLEVBQTJCLFNBQTNCLENBQXFDLENBQXJDLENBQXZJOztBQUVBLFdBQU8sUUFBUCxDQUFnQixPQUFoQixDQUF3QixPQUF4QjtBQUVILENBUkQ7O0FBVUEsSUFBTSxjQUFjLFNBQWQsV0FBYyxPQUFROztBQUV4QixRQUFJLGFBQWEsSUFBSSxlQUFKLENBQW9CLFNBQVMsUUFBVCxDQUFrQixNQUF0QyxFQUE4QyxHQUE5QyxDQUFrRCxNQUFsRCxDQUFqQjs7QUFFQSxR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R087O0FBRUgsb0JBQVEsR0FBUixDQUFZLG9CQUFaOztBQUVBO0FBRUg7QUFFSjs7QUFFRDs7O0FBR0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUo7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUo7O0FBRUE7OztBQUlJOzs7QUFHSjs7QUFFSTs7QUFFQTs7QUFFSjtBQUVILENBbEVEOztrQkFvRWUsRzs7Ozs7QUN4RWY7Ozs7OztBQUVBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IGNvbmZpZyBmcm9tICcuL19jb25maWcuanMnO1xuaW1wb3J0IGNvbm5lY3RlZCBmcm9tICcuL19jb25uZWN0ZWQuanMnO1xuXG5jb25zdCBpbml0Q29ubmVjdCA9ICgpID0+IHtcblxuICAgIGxldCBhdXRob3Jpc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aEJ0bicpO1xuXG4gICAgY29uZmlnLmF1dGhEaXYuY2xhc3NMaXN0LnJlbW92ZSgnaW5hY3RpdmUnKTtcbiAgICBjb25maWcuYXV0aERpdi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICBjb25maWcuY29ubmVjdGVkRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIGNvbmZpZy5jb25uZWN0ZWREaXYuY2xhc3NMaXN0LmFkZCgnaW5hY3RpdmUnKTtcblxuICAgIGF1dGhvcmlzZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblxuICAgICAgICBpbml0QXV0aCgpO1xuXG4gICAgfSwgZmFsc2UpO1xuXG59O1xuXG5jb25zdCBpbml0QXV0aCA9ICgpID0+IHtcblxuICAgIC8vIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7XG5cbiAgICBsZXQgYXV0aFVybCA9IGBodHRwczovL2F1dGgubW9uem8uY29tLz9jbGllbnRfaWQ9JHsgY29uZmlnLmNsaWVudElkIH0mcmVkaXJlY3RfdXJpPSR7IGNvbmZpZy5yZWRpcmVjdFVybCB9JnJlc3BvbnNlX3R5cGU9Y29kZSZzdGF0ZT0keyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDIzKS5zdWJzdHJpbmcoNCkgfWA7XG5cbiAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShhdXRoVXJsKTtcblxufTtcblxuY29uc3QgZ2V0QXV0aENvZGUgPSBjb2RlID0+IHtcblxuICAgIGxldCBhY2Nlc3NDb2RlID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpLmdldCgnY29kZScpO1xuXG4gICAgaWYgKCBhY2Nlc3NDb2RlICkge1xuICAgICAgICBnZXRBY2Nlc3NUb2tlbiggYWNjZXNzQ29kZSApO1xuICAgIH1cblxuXHRyZXR1cm4gYWNjZXNzQ29kZTtcblxufTtcblxuY29uc3QgZ2V0QWNjZXNzVG9rZW4gPSBhY2Nlc3NDb2RlID0+IHtcblxuICAgIGNvbnN0IHVybCA9ICdodHRwczovL2FwaS5tb256by5jb20vb2F1dGgyL3Rva2VuJztcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKClcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ2NsaWVudF9pZCcsIGNvbmZpZy5jbGllbnRJZCk7XG4gICAgZm9ybURhdGEuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgY29uZmlnLmNsaWVudFNlY3JldCk7XG4gICAgZm9ybURhdGEuYXBwZW5kKCdjb2RlJywgYWNjZXNzQ29kZSk7XG4gICAgZm9ybURhdGEuYXBwZW5kKCdncmFudF90eXBlJywgJ2F1dGhvcml6YXRpb25fY29kZScpO1xuICAgIGZvcm1EYXRhLmFwcGVuZCgncmVkaXJlY3RfdXJpJywgY29uZmlnLnJlZGlyZWN0VXJsKTtcblxuICAgIGZldGNoICggdXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBmb3JtRGF0YVxuICAgIH0pXG4gICAgLy8gLnRoZW4oIGRhdGEgPT4gZGF0YS50ZXh0KCkgKVxuICAgIC50aGVuKCAoZGF0YSkgPT4gZGF0YS5qc29uKCkgKVxuICAgIC50aGVuKCAoYXV0aFJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCBhdXRoUmVzcG9uc2UgKVxuXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2FjY2Vzc1Rva2VuJywgYXV0aFJlc3BvbnNlLmFjY2Vzc190b2tlbik7XG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3JlZnJlc2hUb2tlbicsIGF1dGhSZXNwb25zZS5yZWZyZXNoX3Rva2VuKTtcblxuICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgbnVsbCwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTtcblxuICAgICAgICBjb25uZWN0ZWQoKTtcblxuICAgICAgICAvLyAgbGV0IGNsZWFuVXJsID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpLmRlbGV0ZSgnY29kZScpO1xuXG4gICAgICAgIC8vIGFjY2Vzc0NvZGUuZGVsZXRlKCdjb2RlJyk7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coYCBBY2Nlc3MgVG9rZW4gaXMgc2V0OiAkeyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NUb2tlbicpIH0gYCk7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coYE91ciBhY2Nlc3MgdG9rZW4gaXM6ICR7IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJykgfWApO1xuXG4gICAgfSkuY2F0Y2goIGZ1bmN0aW9uICggZXJyb3IgKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCAnZmFpbGVkOiAnLCBlcnJvciApXG4gICAgfSlcblxufVxuXG5leHBvcnQgeyBpbml0Q29ubmVjdCwgaW5pdEF1dGgsIGdldEF1dGhDb2RlIH1cbiIsImNvbnN0IGNvbmZpZyA9IHtcbiAgICAnY2xpZW50SWQnICAgICA6ICcqKiogSUQgKioqJyxcbiAgICAnY2xpZW50U2VjcmV0JyA6ICcqKiogU0VDUkVUICoqKicsXG5cbiAgICAncmVkaXJlY3RVcmwnICA6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnLFxuXG4gICAgJ2Nvbm5lY3RlZERpdicgOiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nvbm5lY3RlZCcpLFxuICAgICdhdXRoRGl2JyAgICAgIDogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRoRGl2Jylcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29uZmlnOyIsImltcG9ydCBjb25maWcgZnJvbSAnLi9fY29uZmlnLmpzJztcblxuY29uc3QgY29ubmVjdGVkID0gKCkgPT4ge1xuXG4gICAgY29uZmlnLmF1dGhEaXYuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgY29uZmlnLmF1dGhEaXYuY2xhc3NMaXN0LmFkZCgnaW5hY3RpdmUnKTtcbiAgICBjb25maWcuY29ubmVjdGVkRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJyk7XG4gICAgY29uZmlnLmNvbm5lY3RlZERpdi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblxuICAgIGNvbnNvbGUubG9nKCd3ZWxsIGRvbmUnKTtcblxuICAgIGNvbnNvbGUubG9nKGBBY2Nlc3MgVG9rZW4gaXMgc2V0OiAkeyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NUb2tlbicpIH0gYCk7XG4gICAgY29uc29sZS5sb2coYE91ciBhY2Nlc3MgdG9rZW4gaXM6ICR7IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJykgfWApO1xuXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3RlZDsiLCJpbXBvcnQgY29uZmlnIGZyb20gJy4vX2NvbmZpZy5qcyc7XG5pbXBvcnQgeyBpbml0Q29ubmVjdCwgZ2V0QXV0aENvZGUgfSBmcm9tICcuL19hdXRoLmpzJztcbmltcG9ydCBjb25uZWN0ZWQgZnJvbSAnLi9fY29ubmVjdGVkLmpzJztcblxuY29uc3QgYXBwID0gKCkgPT4ge1xuXG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndGVzdCcsICd0ZXN0Jyk7XG5cbiAgICBjb25zb2xlLmxvZyggYFNlc3Npb246ICR7IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rlc3QnKSB9IGAgKTtcblxuICAgIGxldCBzaWRlQmFyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKTtcblxuICAgIGlmICggdHlwZW9mIHNpZGVCYXIgIT09ICd1bmRlZmluZWQnICYmIHNpZGVCYXIgIT09IG51bGwgKSB7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coYGFjY2VzcyB0b2tlbiBpcyBzZXQgdG86ICR7IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJykgfSBgKTtcblxuICAgICAgICBjb25uZWN0ZWQoKTtcblxuICAgIH1cbiAgICBlbHNlIHtcblxuICAgICAgICBpZiAoIGdldEF1dGhDb2RlKCdjb2RlJykgKSB7XG5cblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnd2UgbmVlZCB0byBjb25uZWN0Jyk7XG5cbiAgICAgICAgICAgIGluaXRDb25uZWN0KCk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLy8gaWYgKCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NUb2tlbicpID09PSAnbnVsbCcgKSB7XG5cblxuICAgICAgICAvLyBjb25maWcuYXV0aERpdi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgLy8gY29uZmlnLmF1dGhEaXYuY2xhc3NMaXN0LmFkZCgnaW5hY3RpdmUnKTtcbiAgICAgICAgLy8gY29uZmlnLmNvbm5lY3RlZERpdi5jbGFzc0xpc3QucmVtb3ZlKCdpbmFjdGl2ZScpO1xuICAgICAgICAvLyBjb25maWcuY29ubmVjdGVkRGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXG4gICAgLy8gfVxuICAgIC8vIGlmICggZ2V0QXV0aENvZGUoJ2NvZGUnKSApIHtcbiAgICAvLyBlbHNlICggZ2V0QXV0aENvZGUoJ2NvZGUnKSApIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3dlIGhhdmUgYXV0aCBjb2RlIScpO1xuXG4gICAgICAgIC8vIGlmICggc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKSA9PT0gJ251bGwnICkge1xuXG4gICAgICAgIC8vICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgbnVsbCwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTtcblxuICAgICAgICAvLyB9XG5cbiAgICAvLyB9XG5cbiAgICAvLyBpZiAoIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJykgPT09ICdudWxsJyApIHtcblxuXG5cbiAgICAgICAgLy8gRG8gc29tZXRoaW5nIGhlcmUgb25jZSB3ZSBoYXZlIGF1dGggYW5kIGNsZWFuIGl0IHVwXG5cblxuICAgIC8vIH0gZWxzZSB7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3dlIG5lZWQgdG8gY29ubmVjdCcpO1xuXG4gICAgICAgIC8vIGluaXRDb25uZWN0KCk7XG5cbiAgICAvLyB9XG5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFwcDsiLCJpbXBvcnQgYXBwIGZyb20gJy4vX2luaXQuanMnO1xuXG5hcHAoKTsiXX0="}