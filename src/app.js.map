{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/_config.js","src/js/_get-transactions.js","src/js/_init.js","src/js/app.js","src/js/auth/_auth.js","src/js/auth/_connected.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","const config = {\n    'clientId'     : 'oauth2client_00009YXx3nKAlmOlNhnrLF',\n    'clientSecret' : 'mnzconf.qysHN88KPApAuUMznZL8N3ib2tPGjR6YowRXghmEJC+Tj8aoihzNsz1LJYdxep46MrzvOGq9TsU9SRJWf/uM',\n\n    'redirectUrl'  : 'http://localhost:3000',\n    'monzoUrl'     : 'https://api.monzo.com',\n\n    'connectedDiv' :  document.getElementById('connected'),\n    'authDiv'      :  document.getElementById('authDiv')\n};\n\nexport default config;","import config from './_config.js';\n\nconst getTransactions = () => {\n\n    let transactionIDs = [];\n\n    const transEndpoint = `${config.monzoUrl}/transactions?account_id=${sessionStorage.getItem('accountId')}&limit=25`;\n\n    fetch( transEndpoint, {\n        'method': 'GET',\n        headers: {\n            Authorization: `Bearer ${sessionStorage.getItem('accessToken')}`\n        }\n    })\n    .then( (data) => data.json() )\n    .then( (transResponse) => {\n\n        // console.table(transResponse.transactions);\n\n        [...transResponse.transactions].forEach(element => {\n            // console.log(element['id']);\n\n            transactionIDs.push(element['id']);\n        });\n\n        console.table(transactionIDs);\n\n\n    }).catch( function( error ) {\n\n        console.error(`Failed: ${error}`);\n\n    });\n\n};\n\nexport default getTransactions;","import config from './_config.js';\nimport { initConnect, getAuthCode } from './auth/_auth.js';\nimport connected from './auth/_connected.js';\n\nconst app = () => {\n\n    let accessToken = sessionStorage.getItem('accessToken');\n\n    if ( typeof accessToken !== 'undefined' && accessToken !== null ) {\n\n        connected();\n\n    }\n    else {\n\n        if ( getAuthCode('code') ) {\n\n            // If an auth code exists in the URL, not entirely sure this needs to be here\n            console.log('if getauthcode - code');\n\n        } else {\n\n            console.log('we need to connect');\n\n            initConnect();\n\n        }\n\n    }\n\n};\n\nexport default app;","import app from './_init.js';\n\napp();","import config from '../_config.js';\nimport connected from './_connected.js';\n\nconst initConnect = () => {\n\n    let authorise = document.getElementById('authBtn');\n\n    config.authDiv.classList.remove('inactive');\n    config.authDiv.classList.add('active');\n    config.connectedDiv.classList.remove('active');\n    config.connectedDiv.classList.add('inactive');\n\n    authorise.addEventListener('click', () => {\n\n        initAuth();\n\n    }, false);\n\n};\n\nconst initAuth = () => {\n\n    let authUrl = `https://auth.monzo.com/?client_id=${ config.clientId }&redirect_uri=${ config.redirectUrl }&response_type=code&state=${ Math.random().toString(23).substring(4) }`;\n\n    window.location.replace(authUrl);\n\n};\n\nconst getAuthCode = code => {\n\n    let accessCode = new URLSearchParams(document.location.search).get('code');\n\n    if ( accessCode ) {\n        getAccessToken( accessCode );\n    }\n\n\treturn accessCode;\n\n};\n\nconst getAccessToken = accessCode => {\n\n    console.log('get access token function');\n\n    const url = `${config.monzoUrl}/oauth2/token`;\n\n    const formData = new FormData();\n    formData.append('client_id', config.clientId);\n    formData.append('client_secret', config.clientSecret);\n    formData.append('code', accessCode);\n    formData.append('grant_type', 'authorization_code');\n    formData.append('redirect_uri', config.redirectUrl);\n\n    fetch ( url, {\n        method: 'POST',\n        body: formData\n    })\n    // .then( data => data.text() )\n    .then( (data) => data.json() )\n    .then( (authResponse) => {\n        console.log( authResponse );\n\n        sessionStorage.setItem('accessToken', authResponse.access_token);\n        sessionStorage.setItem('refreshToken', authResponse.refresh_token);\n\n        window.history.replaceState(null, null, window.location.pathname);\n\n        connected();\n\n    }).catch( function ( error ) {\n        console.log( 'failed: ', error );\n    });\n\n};\n\nexport { initConnect, initAuth, getAuthCode };\n","import config from '../_config.js';\nimport getTransactions from '../_get-transactions.js';\n\nconst connected = () => {\n\n    config.authDiv.classList.remove('active');\n    config.authDiv.classList.add('inactive');\n    config.connectedDiv.classList.remove('inactive');\n    config.connectedDiv.classList.add('active');\n\n    // console.log(`Our access token is: ${ sessionStorage.getItem('accessToken') }`);\n\n    // Uncomment when you need to verify connection with the API\n    pingMonzo();\n\n    if ( getMonzoAccount('monzoAccountID') ) {\n\n        getTransactions();\n\n    }\n    else {\n\n        console.log('no account id - do something here');\n\n    }\n\n};\n\n/*-------------\nQuick helper function to confirm with Monzo's server that we\n(the current user) are authenticated with the API\n--------------*/\nconst pingMonzo = () => {\n\n    const pingEndpoint = `${config.monzoUrl}/ping/whoami`;\n\n    fetch( pingEndpoint, {\n        method: 'GET',\n        headers: {\n            Authorization: `Bearer ${sessionStorage.getItem('accessToken')}`\n        }\n    })\n    .then( (data) => data.json() )\n    .then( (pingResponse) => {\n\n        console.table(pingResponse);\n\n    }).catch( function( error ) {\n\n        console.error(`Failed: ${error}`);\n\n    });\n\n};\n\n/*-------------\nGet the account ID of our preferred Monzo account,\nthis will only get (1) account and excludes prepaid\naccounts. If Monzo let users have multiple accounts\nin the future, this will need to change.\n\nIn fact - I haven't looked into Joint accounts so\nthis might not even work for those.\n--------------*/\nconst getMonzoAccount = ( monzoAccountID ) => {\n\n    const pingEndpoint = `${config.monzoUrl}/accounts?account_type=uk_retail`;\n\n    fetch( pingEndpoint, {\n        method: 'GET',\n        headers: {\n            Authorization: `Bearer ${sessionStorage.getItem('accessToken')}`\n        },\n    })\n    .then( (data) => data.json() )\n    .then( (accountsResp) => {\n\n        // console.table( accountsResp.accounts );\n        monzoAccountID = accountsResp.accounts[0].id;\n        sessionStorage.setItem('accountId', monzoAccountID );\n\n    }).catch( function( error ) {\n\n        console.error(`Failed: ${error}`);\n\n    });\n\n    return monzoAccountID;\n\n};\n\nexport default connected;"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvX2NvbmZpZy5qcyIsInNyYy9qcy9fZ2V0LXRyYW5zYWN0aW9ucy5qcyIsInNyYy9qcy9faW5pdC5qcyIsInNyYy9qcy9hcHAuanMiLCJzcmMvanMvYXV0aC9fYXV0aC5qcyIsInNyYy9qcy9hdXRoL19jb25uZWN0ZWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQ0FBLElBQU0sU0FBUztBQUNYLGdCQUFpQixxQ0FETjtBQUVYLG9CQUFpQiw4RkFGTjs7QUFJWCxtQkFBaUIsdUJBSk47QUFLWCxnQkFBaUIsdUJBTE47O0FBT1gsb0JBQWtCLFNBQVMsY0FBVCxDQUF3QixXQUF4QixDQVBQO0FBUVgsZUFBa0IsU0FBUyxjQUFULENBQXdCLFNBQXhCO0FBUlAsQ0FBZjs7a0JBV2UsTTs7Ozs7Ozs7O0FDWGY7Ozs7Ozs7O0FBRUEsSUFBTSxrQkFBa0IsU0FBbEIsZUFBa0IsR0FBTTs7QUFFMUIsUUFBSSxpQkFBaUIsRUFBckI7O0FBRUEsUUFBTSxnQkFBbUIsaUJBQU8sUUFBMUIsaUNBQThELGVBQWUsT0FBZixDQUF1QixXQUF2QixDQUE5RCxjQUFOOztBQUVBLFVBQU8sYUFBUCxFQUFzQjtBQUNsQixrQkFBVSxLQURRO0FBRWxCLGlCQUFTO0FBQ0wsdUNBQXlCLGVBQWUsT0FBZixDQUF1QixhQUF2QjtBQURwQjtBQUZTLEtBQXRCLEVBTUMsSUFORCxDQU1PLFVBQUMsSUFBRDtBQUFBLGVBQVUsS0FBSyxJQUFMLEVBQVY7QUFBQSxLQU5QLEVBT0MsSUFQRCxDQU9PLFVBQUMsYUFBRCxFQUFtQjs7QUFFdEI7O0FBRUEscUNBQUksY0FBYyxZQUFsQixHQUFnQyxPQUFoQyxDQUF3QyxtQkFBVztBQUMvQzs7QUFFQSwyQkFBZSxJQUFmLENBQW9CLFFBQVEsSUFBUixDQUFwQjtBQUNILFNBSkQ7O0FBTUEsZ0JBQVEsS0FBUixDQUFjLGNBQWQ7QUFHSCxLQXBC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RUFPQyxJQVBELENBT08sVUFBQyxZQUFELEVBQWtCOztBQUVyQixnQkFBUSxLQUFSLENBQWMsWUFBZDtBQUVILEtBWEQsRUFXRyxLQVhILENBV1UsVUFBVSxLQUFWLEVBQWtCOztBQUV4QixnQkFBUSxLQUFSLGNBQXlCLEtBQXpCO0FBRUgsS0FmRDtBQWlCSCxDQXJCRDs7QUF1QkE7Ozs7Ozs7OztBQVNBLElBQU0sa0JBQWtCLFNBQWxCLGVBQWtCLENBQUUsY0FBRixFQUFzQjs7QUFFMUMsUUFBTSxlQUFrQixpQkFBTyxRQUF6QixxQ0FBTjs7QUFFQSxVQUFPLFlBQVAsRUFBcUI7QUFDakIsZ0JBQVEsS0FEUztBQUVqQixpQkFBUztBQUNMLHVDQUF5QixlQUFlLE9BQWYsQ0FBdUIsYUFBdkI7QUFEcEI7QUFGUSxLQUFyQixFQU1DLElBTkQsQ0FNTyxVQUFDLElBQUQ7QUFBQSxlQUFVLEtBQUssSUFBTCxFQUFWO0FBQUEsS0FOUCxFQU9DLElBUEQsQ0FPTyxVQUFDLFlBQUQsRUFBa0I7O0FBRXJCO0FBQ0EseUJBQWlCLGFBQWEsUUFBYixDQUFzQixDQUF0QixFQUF5QixFQUExQztBQUNBLHVCQUFlLE9BQWYsQ0FBdUIsV0FBdkIsRUFBb0MsY0FBcEM7QUFFSCxLQWJELEVBYUcsS0FiSCxDQWFVLFVBQVUsS0FBVixFQUFrQjs7QUFFeEIsZ0JBQVEsS0FBUixjQUF5QixLQUF6QjtBQUVILEtBakJEOztBQW1CQSxXQUFPLGNBQVA7QUFFSCxDQXpCRDs7a0JBMkJlLFMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJjb25zdCBjb25maWcgPSB7XG4gICAgJ2NsaWVudElkJyAgICAgOiAnb2F1dGgyY2xpZW50XzAwMDA5WVh4M25LQWxtT2xOaG5yTEYnLFxuICAgICdjbGllbnRTZWNyZXQnIDogJ21uemNvbmYucXlzSE44OEtQQXBBdVVNem5aTDhOM2liMnRQR2pSNllvd1JYZ2htRUpDK1RqOGFvaWh6TnN6MUxKWWR4ZXA0Nk1yenZPR3E5VHNVOVNSSldmL3VNJyxcblxuICAgICdyZWRpcmVjdFVybCcgIDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsXG4gICAgJ21vbnpvVXJsJyAgICAgOiAnaHR0cHM6Ly9hcGkubW9uem8uY29tJyxcblxuICAgICdjb25uZWN0ZWREaXYnIDogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25uZWN0ZWQnKSxcbiAgICAnYXV0aERpdicgICAgICA6ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aERpdicpXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb25maWc7IiwiaW1wb3J0IGNvbmZpZyBmcm9tICcuL19jb25maWcuanMnO1xuXG5jb25zdCBnZXRUcmFuc2FjdGlvbnMgPSAoKSA9PiB7XG5cbiAgICBsZXQgdHJhbnNhY3Rpb25JRHMgPSBbXTtcblxuICAgIGNvbnN0IHRyYW5zRW5kcG9pbnQgPSBgJHtjb25maWcubW9uem9Vcmx9L3RyYW5zYWN0aW9ucz9hY2NvdW50X2lkPSR7c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWNjb3VudElkJyl9JmxpbWl0PTI1YDtcblxuICAgIGZldGNoKCB0cmFuc0VuZHBvaW50LCB7XG4gICAgICAgICdtZXRob2QnOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyl9YFxuICAgICAgICB9XG4gICAgfSlcbiAgICAudGhlbiggKGRhdGEpID0+IGRhdGEuanNvbigpIClcbiAgICAudGhlbiggKHRyYW5zUmVzcG9uc2UpID0+IHtcblxuICAgICAgICAvLyBjb25zb2xlLnRhYmxlKHRyYW5zUmVzcG9uc2UudHJhbnNhY3Rpb25zKTtcblxuICAgICAgICBbLi4udHJhbnNSZXNwb25zZS50cmFuc2FjdGlvbnNdLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlbGVtZW50WydpZCddKTtcblxuICAgICAgICAgICAgdHJhbnNhY3Rpb25JRHMucHVzaChlbGVtZW50WydpZCddKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS50YWJsZSh0cmFuc2FjdGlvbklEcyk7XG5cblxuICAgIH0pLmNhdGNoKCBmdW5jdGlvbiggZXJyb3IgKSB7XG5cbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkOiAke2Vycm9yfWApO1xuXG4gICAgfSk7XG5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdldFRyYW5zYWN0aW9uczsiLCJpbXBvcnQgY29uZmlnIGZyb20gJy4vX2NvbmZpZy5qcyc7XG5pbXBvcnQgeyBpbml0Q29ubmVjdCwgZ2V0QXV0aENvZGUgfSBmcm9tICcuL2F1dGgvX2F1dGguanMnO1xuaW1wb3J0IGNvbm5lY3RlZCBmcm9tICcuL2F1dGgvX2Nvbm5lY3RlZC5qcyc7XG5cbmNvbnN0IGFwcCA9ICgpID0+IHtcblxuICAgIGxldCBhY2Nlc3NUb2tlbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyk7XG5cbiAgICBpZiAoIHR5cGVvZiBhY2Nlc3NUb2tlbiAhPT0gJ3VuZGVmaW5lZCcgJiYgYWNjZXNzVG9rZW4gIT09IG51bGwgKSB7XG5cbiAgICAgICAgY29ubmVjdGVkKCk7XG5cbiAgICB9XG4gICAgZWxzZSB7XG5cbiAgICAgICAgaWYgKCBnZXRBdXRoQ29kZSgnY29kZScpICkge1xuXG4gICAgICAgICAgICAvLyBJZiBhbiBhdXRoIGNvZGUgZXhpc3RzIGluIHRoZSBVUkwsIG5vdCBlbnRpcmVseSBzdXJlIHRoaXMgbmVlZHMgdG8gYmUgaGVyZVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2lmIGdldGF1dGhjb2RlIC0gY29kZScpO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3ZSBuZWVkIHRvIGNvbm5lY3QnKTtcblxuICAgICAgICAgICAgaW5pdENvbm5lY3QoKTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFwcDsiLCJpbXBvcnQgYXBwIGZyb20gJy4vX2luaXQuanMnO1xuXG5hcHAoKTsiLCJpbXBvcnQgY29uZmlnIGZyb20gJy4uL19jb25maWcuanMnO1xuaW1wb3J0IGNvbm5lY3RlZCBmcm9tICcuL19jb25uZWN0ZWQuanMnO1xuXG5jb25zdCBpbml0Q29ubmVjdCA9ICgpID0+IHtcblxuICAgIGxldCBhdXRob3Jpc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aEJ0bicpO1xuXG4gICAgY29uZmlnLmF1dGhEaXYuY2xhc3NMaXN0LnJlbW92ZSgnaW5hY3RpdmUnKTtcbiAgICBjb25maWcuYXV0aERpdi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICBjb25maWcuY29ubmVjdGVkRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIGNvbmZpZy5jb25uZWN0ZWREaXYuY2xhc3NMaXN0LmFkZCgnaW5hY3RpdmUnKTtcblxuICAgIGF1dGhvcmlzZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblxuICAgICAgICBpbml0QXV0aCgpO1xuXG4gICAgfSwgZmFsc2UpO1xuXG59O1xuXG5jb25zdCBpbml0QXV0aCA9ICgpID0+IHtcblxuICAgIGxldCBhdXRoVXJsID0gYGh0dHBzOi8vYXV0aC5tb256by5jb20vP2NsaWVudF9pZD0keyBjb25maWcuY2xpZW50SWQgfSZyZWRpcmVjdF91cmk9JHsgY29uZmlnLnJlZGlyZWN0VXJsIH0mcmVzcG9uc2VfdHlwZT1jb2RlJnN0YXRlPSR7IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMjMpLnN1YnN0cmluZyg0KSB9YDtcblxuICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGF1dGhVcmwpO1xuXG59O1xuXG5jb25zdCBnZXRBdXRoQ29kZSA9IGNvZGUgPT4ge1xuXG4gICAgbGV0IGFjY2Vzc0NvZGUgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCkuZ2V0KCdjb2RlJyk7XG5cbiAgICBpZiAoIGFjY2Vzc0NvZGUgKSB7XG4gICAgICAgIGdldEFjY2Vzc1Rva2VuKCBhY2Nlc3NDb2RlICk7XG4gICAgfVxuXG5cdHJldHVybiBhY2Nlc3NDb2RlO1xuXG59O1xuXG5jb25zdCBnZXRBY2Nlc3NUb2tlbiA9IGFjY2Vzc0NvZGUgPT4ge1xuXG4gICAgY29uc29sZS5sb2coJ2dldCBhY2Nlc3MgdG9rZW4gZnVuY3Rpb24nKTtcblxuICAgIGNvbnN0IHVybCA9IGAke2NvbmZpZy5tb256b1VybH0vb2F1dGgyL3Rva2VuYDtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgZm9ybURhdGEuYXBwZW5kKCdjbGllbnRfaWQnLCBjb25maWcuY2xpZW50SWQpO1xuICAgIGZvcm1EYXRhLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIGNvbmZpZy5jbGllbnRTZWNyZXQpO1xuICAgIGZvcm1EYXRhLmFwcGVuZCgnY29kZScsIGFjY2Vzc0NvZGUpO1xuICAgIGZvcm1EYXRhLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdhdXRob3JpemF0aW9uX2NvZGUnKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ3JlZGlyZWN0X3VyaScsIGNvbmZpZy5yZWRpcmVjdFVybCk7XG5cbiAgICBmZXRjaCAoIHVybCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogZm9ybURhdGFcbiAgICB9KVxuICAgIC8vIC50aGVuKCBkYXRhID0+IGRhdGEudGV4dCgpIClcbiAgICAudGhlbiggKGRhdGEpID0+IGRhdGEuanNvbigpIClcbiAgICAudGhlbiggKGF1dGhSZXNwb25zZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyggYXV0aFJlc3BvbnNlICk7XG5cbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzVG9rZW4nLCBhdXRoUmVzcG9uc2UuYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgncmVmcmVzaFRva2VuJywgYXV0aFJlc3BvbnNlLnJlZnJlc2hfdG9rZW4pO1xuXG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpO1xuXG4gICAgICAgIGNvbm5lY3RlZCgpO1xuXG4gICAgfSkuY2F0Y2goIGZ1bmN0aW9uICggZXJyb3IgKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCAnZmFpbGVkOiAnLCBlcnJvciApO1xuICAgIH0pO1xuXG59O1xuXG5leHBvcnQgeyBpbml0Q29ubmVjdCwgaW5pdEF1dGgsIGdldEF1dGhDb2RlIH07XG4iLCJpbXBvcnQgY29uZmlnIGZyb20gJy4uL19jb25maWcuanMnO1xuaW1wb3J0IGdldFRyYW5zYWN0aW9ucyBmcm9tICcuLi9fZ2V0LXRyYW5zYWN0aW9ucy5qcyc7XG5cbmNvbnN0IGNvbm5lY3RlZCA9ICgpID0+IHtcblxuICAgIGNvbmZpZy5hdXRoRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIGNvbmZpZy5hdXRoRGl2LmNsYXNzTGlzdC5hZGQoJ2luYWN0aXZlJyk7XG4gICAgY29uZmlnLmNvbm5lY3RlZERpdi5jbGFzc0xpc3QucmVtb3ZlKCdpbmFjdGl2ZScpO1xuICAgIGNvbmZpZy5jb25uZWN0ZWREaXYuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgT3VyIGFjY2VzcyB0b2tlbiBpczogJHsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKSB9YCk7XG5cbiAgICAvLyBVbmNvbW1lbnQgd2hlbiB5b3UgbmVlZCB0byB2ZXJpZnkgY29ubmVjdGlvbiB3aXRoIHRoZSBBUElcbiAgICBwaW5nTW9uem8oKTtcblxuICAgIGlmICggZ2V0TW9uem9BY2NvdW50KCdtb256b0FjY291bnRJRCcpICkge1xuXG4gICAgICAgIGdldFRyYW5zYWN0aW9ucygpO1xuXG4gICAgfVxuICAgIGVsc2Uge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdubyBhY2NvdW50IGlkIC0gZG8gc29tZXRoaW5nIGhlcmUnKTtcblxuICAgIH1cblxufTtcblxuLyotLS0tLS0tLS0tLS0tXG5RdWljayBoZWxwZXIgZnVuY3Rpb24gdG8gY29uZmlybSB3aXRoIE1vbnpvJ3Mgc2VydmVyIHRoYXQgd2Vcbih0aGUgY3VycmVudCB1c2VyKSBhcmUgYXV0aGVudGljYXRlZCB3aXRoIHRoZSBBUElcbi0tLS0tLS0tLS0tLS0tKi9cbmNvbnN0IHBpbmdNb256byA9ICgpID0+IHtcblxuICAgIGNvbnN0IHBpbmdFbmRwb2ludCA9IGAke2NvbmZpZy5tb256b1VybH0vcGluZy93aG9hbWlgO1xuXG4gICAgZmV0Y2goIHBpbmdFbmRwb2ludCwge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKX1gXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC50aGVuKCAoZGF0YSkgPT4gZGF0YS5qc29uKCkgKVxuICAgIC50aGVuKCAocGluZ1Jlc3BvbnNlKSA9PiB7XG5cbiAgICAgICAgY29uc29sZS50YWJsZShwaW5nUmVzcG9uc2UpO1xuXG4gICAgfSkuY2F0Y2goIGZ1bmN0aW9uKCBlcnJvciApIHtcblxuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQ6ICR7ZXJyb3J9YCk7XG5cbiAgICB9KTtcblxufTtcblxuLyotLS0tLS0tLS0tLS0tXG5HZXQgdGhlIGFjY291bnQgSUQgb2Ygb3VyIHByZWZlcnJlZCBNb256byBhY2NvdW50LFxudGhpcyB3aWxsIG9ubHkgZ2V0ICgxKSBhY2NvdW50IGFuZCBleGNsdWRlcyBwcmVwYWlkXG5hY2NvdW50cy4gSWYgTW9uem8gbGV0IHVzZXJzIGhhdmUgbXVsdGlwbGUgYWNjb3VudHNcbmluIHRoZSBmdXR1cmUsIHRoaXMgd2lsbCBuZWVkIHRvIGNoYW5nZS5cblxuSW4gZmFjdCAtIEkgaGF2ZW4ndCBsb29rZWQgaW50byBKb2ludCBhY2NvdW50cyBzb1xudGhpcyBtaWdodCBub3QgZXZlbiB3b3JrIGZvciB0aG9zZS5cbi0tLS0tLS0tLS0tLS0tKi9cbmNvbnN0IGdldE1vbnpvQWNjb3VudCA9ICggbW9uem9BY2NvdW50SUQgKSA9PiB7XG5cbiAgICBjb25zdCBwaW5nRW5kcG9pbnQgPSBgJHtjb25maWcubW9uem9Vcmx9L2FjY291bnRzP2FjY291bnRfdHlwZT11a19yZXRhaWxgO1xuXG4gICAgZmV0Y2goIHBpbmdFbmRwb2ludCwge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKX1gXG4gICAgICAgIH0sXG4gICAgfSlcbiAgICAudGhlbiggKGRhdGEpID0+IGRhdGEuanNvbigpIClcbiAgICAudGhlbiggKGFjY291bnRzUmVzcCkgPT4ge1xuXG4gICAgICAgIC8vIGNvbnNvbGUudGFibGUoIGFjY291bnRzUmVzcC5hY2NvdW50cyApO1xuICAgICAgICBtb256b0FjY291bnRJRCA9IGFjY291bnRzUmVzcC5hY2NvdW50c1swXS5pZDtcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnYWNjb3VudElkJywgbW9uem9BY2NvdW50SUQgKTtcblxuICAgIH0pLmNhdGNoKCBmdW5jdGlvbiggZXJyb3IgKSB7XG5cbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkOiAke2Vycm9yfWApO1xuXG4gICAgfSk7XG5cbiAgICByZXR1cm4gbW9uem9BY2NvdW50SUQ7XG5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3RlZDsiXX0="}